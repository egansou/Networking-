# Simple server

Writing a server program which will communicate using sockets with
a client program. The  server program will operate according to the protocol
described below. The server runs on the machine SERVER HOSTNAME and listens for requests on a TCP socket
bound to port SERVER PORT. Both constants are defined in the header file, “common.h”

The protocol has four types of messages: HELLO, STATUS, CLIENT BYE and SERVER BYE.

Each message is an ASCII string, and consists of multiple fields separated by whitespace (space
(0x20) or newline (0x0a) character). The MAXIMUM length of the string is 255.
The protocol outline is given in Fig ??. The client initiates the protocol by sending a HELLO
message to the server. The server replies with a STATUS message. The client then sends a
CLIENT BYE message, and the server terminates the connection by sending a SERVER BYE
message. A connection is successful if and only if all of these messages are correctly sent and
received. 

The details of each message are as follows:
## 1. HELLO (From the client to the server: Client → Server)
The HELLO message has 4 fields EXACTLY in the following order:
### Magic String
It MUST set to be MAGIC STRING which is a constant defined in the header file
(”cmsc417”). If the client sends a message which does not start with this magic string,
the message should be ignored by your server program.
### Message Type
The type string is HELLO to indicate a message type HELLO. The server should be
case-sensitive.
### Login ID
This field is a “pretend” login ID. We will put this login ID as a argument when we
execute the client program. 
### Name
The last field is a name. 

An example HELLO message might look like this:
cmsc417 HELLO cs417000 Alice

## 2. STATUS (Server → Client)
The STATUS message has 4 fields in the following order:
### Magic String
Same as above.
### Message Type
Must be set to STATUS.
### Cookie
An integer randomly generated by the server (represented in ASCII). Cookie generation
is explained later.
### IP Address and Port number
A string of the form a.b.c.d:e, representing the IP address and port number of the client.
An example STATUS message might be:
cmsc417 STATUS 42 128.8.128.153:48522

## 3. CLIENT BYE (Client → Server)
The CLIENT BYE message has 3 fields in the following order:
### Magic String
The same as above.
### Message Type
Must be set to CLIENT BYE.
### Cookie
A string of an integer, set to the value of the cookie sent by the server in the STATUS
message for this connection.
An example CLIENT BYE message would be:
cmsc417 CLIENT BYE 42

## 4. SERVER BYE (Server → Client)
The SERVER BYE message has 2 fields in the following order:
### Magic String
The same as above.
### Message Type
Must be set to ”SERVER BYE”.
An example SERVER BYE message would be:
cmsc417 SERVER BYE

# Server Program
The command line syntax for a minimal server is given below. The server will take the port as an
argument.
USAGE:
./server [<port>]
• The cookie should be generated using the formula:
(a + b + c + d) 13 mod 1111, where a.b.c.d is the IP address of the client, 0 ≤ a, b, c, d ≤
255.
After successful communication, the server MUST print the cookie it generates along with
the clients login id, first name, IP address and port number. All this information is
in a single line. An example is:
555 cs417050 Alice from 128.8.126.208:48542
Notice that ((128+8+126+208) 13 mod 1111) is 555.
